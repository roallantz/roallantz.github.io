(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{985:(e,t,n)=>{Promise.resolve().then(n.bind(n,3994))},1208:e=>{e.exports={box:"BoxItem_box__qcIKH",boxActive:"BoxItem_boxActive__IqZkB",header:"BoxItem_header__Avmld",title:"BoxItem_title__2e_4I",titleTwoLine:"BoxItem_titleTwoLine__2dwUa",kwWrap:"BoxItem_kwWrap__Q0M5N",kwValue:"BoxItem_kwValue__a57UK",kwBumpBtn:"BoxItem_kwBumpBtn__IAHeq",kwBumpTop:"BoxItem_kwBumpTop__g6GW2",kwBumpBottom:"BoxItem_kwBumpBottom__o8pZX",resizeEdge:"BoxItem_resizeEdge__C_TVL",dragAssist:"BoxItem_dragAssist__KZDkT",dragAid:"BoxItem_dragAid__tRn3A",editPanel:"BoxItem_editPanel__R5g6X",fields:"BoxItem_fields__GZRX8",field:"BoxItem_field__HwDbi",input:"BoxItem_input__AH6Kf",err:"BoxItem_err__Sumlh",swatches:"BoxItem_swatches___9uz7",swatch:"BoxItem_swatch__4bvr7",swatchActive:"BoxItem_swatchActive__lUtmW",metaRow:"BoxItem_metaRow__cr21D",metaText:"BoxItem_metaText__qOpsO",editActions:"BoxItem_editActions__tuAzv",btnSecondary:"BoxItem_btnSecondary__X1hgA",btnPrimary:"BoxItem_btnPrimary__Ugp72",btnDanger:"BoxItem_btnDanger__6TL0h"}},2577:e=>{e.exports={card:"TimelineSimulator_card__mUBGk",kpis:"TimelineSimulator_kpis__f2_eH",kpiCards:"TimelineSimulator_kpiCards__Pr1Rt",kpiTitleRow:"TimelineSimulator_kpiTitleRow__KvRoN",kpiTitleText:"TimelineSimulator_kpiTitleText__cW2_w",kpiHelpAnchor:"TimelineSimulator_kpiHelpAnchor__hQnhC",kpiHelpButton:"TimelineSimulator_kpiHelpButton__PYYD8",kpiHelpPopover:"TimelineSimulator_kpiHelpPopover__X9Pal",kpiHelpCaret:"TimelineSimulator_kpiHelpCaret__SOInY",toggle:"TimelineSimulator_toggle__NzK_U",fuseRow:"TimelineSimulator_fuseRow__w8lFq",infoAnchor:"TimelineSimulator_infoAnchor__iQ7Sp",infoPopover:"TimelineSimulator_infoPopover__y9gVI",infoCaret:"TimelineSimulator_infoCaret__vNFbH",infoList:"TimelineSimulator_infoList__U92ZI",infoSublist:"TimelineSimulator_infoSublist__16sTy",kpi:"TimelineSimulator_kpi__O_VQR",kpiLabel:"TimelineSimulator_kpiLabel__ZPEkC",kpiValue:"TimelineSimulator_kpiValue__iQmaA",note:"TimelineSimulator_note__IycmQ",toolbar:"TimelineSimulator_toolbar__d6X9f",toolbarItem:"TimelineSimulator_toolbarItem__U6P4U",primary:"TimelineSimulator_primary__dEPy2",secondary:"TimelineSimulator_secondary__4C0Hr",popover:"TimelineSimulator_popover__PepDn"}},2892:e=>{e.exports={style:{fontFamily:"'Poppins', 'Poppins Fallback'",fontStyle:"normal"},className:"__className_1e35df"}},3994:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>eh});var a=n(5155),r=n(2115),l=n(2577),i=n.n(l),o=n(6169),s=n.n(o);let c={blue:"#053C55",yellow:"#F3BF56",pink:"#F8C3C6",red:"#E56452",white:"#FFFFFF"},u={orange_light:"#f6a924",orange_dark:"#ee7d11",blue_light:"#00acd6",blue_dark:"#007da8",pink_dark:"#F9BBBC",white:"#FFFFFF"},d={blue4:"#CED8DD"},m=null,p=[c.pink,u.blue_light,u.orange_dark,u.orange_light];function f(){if(0===p.length)return d.blue4;let e=Math.floor(Math.random()*p.length);return e===m&&(e=(e+1)%p.length),m=e,p[e]}function h(e){let{series:t,yFuseKw:n,fuseA:l}=e,i=(0,r.useRef)(null),o=(0,r.useRef)(null),d=(0,r.useRef)(null),[m,p]=(0,r.useState)(null),f=(0,r.useMemo)(()=>{let e=t.length||0;if(!e)return Array(24).fill(0);let n=e/24,a=Array(24).fill(0);for(let e=0;e<24;e++){var r;let l=0;for(let a=0;a<n;a++)l+=null!=(r=t[e*n+a])?r:0;a[e]=+(l/n).toFixed(1)}return a},[t]),h=(0,r.useMemo)(()=>{let e=f.reduce((e,t)=>e+t,0)/(f.length||1),t=Math.sqrt(f.reduce((t,n)=>t+(n-e)*(n-e),0)/(f.length||1)||1e-6),n=-1/0,a=0;return f.forEach((e,t)=>{e>n&&(n=e,a=t)}),{mean:e,std:t,max:n,maxHour:a}},[f]),v=(0,r.useMemo)(()=>{let e=f.filter((e,t)=>t>=7&&t<21);if(!e.length)return h;let t=e.reduce((e,t)=>e+t,0)/e.length,n=Math.sqrt(e.reduce((e,n)=>e+(n-t)*(n-t),0)/(e.length||1)||1e-6);return{mean:t,std:n}},[f,h]),x=(0,r.useMemo)(()=>{let e=h.max||0;return null==n?Math.max(.1,e):Math.max(Math.max(.1,n),e||.1)},[n,h.max]);return(0,r.useEffect)(()=>{var e,t;let a=i.current;if(!a)return;let r=a.getContext("2d");if(!r)return;let s=window.devicePixelRatio||1,p=a.clientWidth;a.width=Math.max(1,Math.floor(p*s)),a.height=Math.floor(280*s);let b=a.width,k=a.height,w=52*s,y=16*s,j=b-w-26*s,N=k-y-34*s,S=j/24;r.font="".concat(12*s,"px system-ui,-apple-system,Segoe UI,Roboto");let T=Math.ceil(44*s/Math.max(1,S)),M=null!=(e=[1,2,3,4,6,8,12,24].find(e=>e>=T))?e:24,A=null!=(t=o.current)?t:f.slice(),B=f.slice();o.current=B.slice();let C=(e,t)=>y+(1-t/Math.max(1e-6,e))*N,E=performance.now(),F=e=>{let t=Math.min(1,(e-E)/400);(e=>{var t;let a=1-Math.pow(1-e,3);r.clearRect(0,0,b,k),r.strokeStyle="#0d2a3a",r.globalAlpha=.12,r.lineWidth=+s;for(let e=0;e<=6;e++){let t=y+N/6*e;r.beginPath(),r.moveTo(w,t),r.lineTo(w+j,t),r.stroke()}r.globalAlpha=1;let i=k-18*s,o=w+7/24*j,d=w+.875*j,p=g(u.pink_dark);r.fillStyle="rgba(".concat(p.r,",").concat(p.g,",").concat(p.b,",0.35)"),r.fillRect(o,i,d-o,16*s);let f=g(c.red);if(r.fillStyle="rgba(".concat(f.r,",").concat(f.g,",").concat(f.b,",0.9)"),r.fillText("h\xf6glasttid",o,i-2*s),null!=n){let e=C(x,n);r.strokeStyle=c.blue,r.lineWidth=2*s,r.beginPath(),r.moveTo(w,e),r.lineTo(w+j,e),r.stroke();let t="".concat(l," A"),a="".concat(n.toFixed(1).replace(".",",")," kW");r.fillStyle=c.blue;let i=w-6*s-Math.max(r.measureText(t).width,r.measureText(a).width);r.fillText(t,i,e-4*s),r.fillText(a,i,e+12*s)}for(let e=0;e<24;e++){let t,n=A[e]+(B[e]-A[e])*a,l=w+e*S+.1*S,i=.8*S,o=C(x,n),d=Math.max(v.std,.6),p=(n-v.mean)/d,f=e>=7&&e<21,h="#3a8f5a",g=c.yellow,b=u.orange_dark,k=c.red;if(f)if(p<=0)t=h;else if(p<1.5)t=_(h,g,p/1.5);else if(p<3.5){let e=(p-1.5)/2;t=e<.5?_(g,b,2*e):_(b,k,(e-.5)*2)}else t=k;else t=h;if(r.fillStyle=t,r.globalAlpha=.9,r.fillRect(l,o,i,y+N-o),e===m){r.globalAlpha=1,r.strokeStyle="#123447",r.lineWidth=2*s,r.strokeRect(l-s,o,i+2*s,y+N-o);let e="".concat((Math.round(10*n)/10).toFixed(1)," kW");r.fillStyle="rgba(18,52,71,0.92)";let t=r.measureText(e).width+10*s,a=Math.min(w+j-t,Math.max(w,l+i/2-t/2)),c=Math.max(y+14*s,o-10*s);r.fillRect(a,c-14*s,t,16*s),r.fillStyle="#fff",r.fillText(e,a+5*s,c-2*s)}}let T=C(x,null!=(t=B[h.maxHour])?t:0);r.save(),r.setLineDash([6*s,6*s]),r.strokeStyle=u.orange_dark,r.lineWidth=2*s,r.beginPath(),r.moveTo(w,T),r.lineTo(w+j,T),r.stroke(),r.restore();let E=null!=n?C(x,n):null;if(!(null!=E&&Math.abs(T-E)<=8*s)){let e="".concat((Math.round(10*(h.max||0))/10).toFixed(1)," kW");r.fillStyle=u.orange_dark;let t=w-6*s-r.measureText(e).width,n=T-2*s;r.fillText(e,t,n)}r.fillStyle="#35566a";for(let e=0;e<=24;e+=M){let t=w+e*S;r.fillText("".concat(String(e).padStart(2,"0"),":00"),t-16*s,k-6*s)}})(t),t<1&&(d.current=requestAnimationFrame(F))};return d.current&&cancelAnimationFrame(d.current),d.current=requestAnimationFrame(F),()=>{d.current&&cancelAnimationFrame(d.current)}},[f,h,m,n,x,l,v]),(0,r.useEffect)(()=>{let e=i.current;if(!e)return;let t=t=>{let n=e.getBoundingClientRect(),a=t.clientX-n.left,r=window.devicePixelRatio||1,l=e.clientWidth*r,i=52*r,o=Math.floor((a*r-i)/((l-i-26*r)/24));p(o>=0&&o<24?o:null)},n=()=>p(null);return e.addEventListener("mousemove",t),e.addEventListener("mouseleave",n),()=>{e.removeEventListener("mousemove",t),e.removeEventListener("mouseleave",n)}},[]),(0,a.jsx)("div",{className:s().wrap,children:(0,a.jsx)("canvas",{ref:i,className:s().canvas})})}function _(e,t,n){let a=g(e),r=g(t),l=Math.round(a.r+(r.r-a.r)*n),i=Math.round(a.g+(r.g-a.g)*n),o=Math.round(a.b+(r.b-a.b)*n);return"rgb(".concat(l,",").concat(i,",").concat(o,")")}function g(e){let t=e.replace("#",""),n=parseInt(3===t.length?t.split("").map(e=>e+e).join(""):t,16);return{r:n>>16&255,g:n>>8&255,b:255&n}}var v=n(5749),x=n.n(v);let b=e=>Math.max(0,Math.min(287,e));var k=n(1208),w=n.n(k),y=n(2892),j=n.n(y),N=n(7786),S=n.n(N);function T(e){let{size:t="large",variant:n="default",className:r,children:l,style:i,...o}=e,s="menu"===t?S().menuSize:S().large,{bg:u,color:d}=(()=>{switch(n){case"danger":return{bg:c.red,color:"#fff"};case"menu":return{bg:c.yellow,color:c.blue};default:return{bg:c.blue,color:c.white}}})(),m={backgroundColor:u,color:d,...i||{}},p=[S().base,s,S()[n],j().className,r].filter(Boolean).join(" ");return(0,a.jsx)("button",{className:p,style:m,...o,children:l})}var M=n(6583),A=n.n(M);function B(e){let{active:t=!1,className:n,children:r,...l}=e,i=[A().base,t?A().active:"",n].filter(Boolean).join(" ");return(0,a.jsxs)("button",{type:"button",role:"radio","aria-checked":t,className:i,...l,children:[(0,a.jsx)("span",{className:A().radioOuter,"aria-hidden":!0,children:(0,a.jsx)("span",{className:A().radioInner})}),(0,a.jsx)("span",{className:A().label,children:r})]})}function C(e){if(!e)return null;let t=e.replace(",",".").trim();if(""===t||"."===t)return null;let n=Number(t);return!Number.isFinite(n)||n<0||n>50?null:Math.round(10*n)/10}function E(e){return e.toFixed(1)}function F(e){let{inst:t,pxPerSlot:n,catalog:l,onDragStart:i,onResizeStart:o,onRemove:s,onUpdate:c}=e,u=(0,r.useRef)(null),d=(0,r.useRef)(null),m=(0,r.useRef)(null),p=t.start*n,f=t.duration*n,[h,_]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),k=3===t.behavior||5===t.behavior,y=3===t.behavior,j=(0,r.useMemo)(()=>l.find(e=>e.type===t.type),[l,t.type]),N=f<40,S=(0,r.useRef)(null),M=(0,r.useMemo)(()=>{let e=5*t.duration,n=Math.floor(e/60),a=e%60;return n&&a?"".concat(n," h ").concat(a," min"):n?"".concat(n," h"):"".concat(a," min")},[t.duration]),[A,F]=(0,r.useState)(E(t.kw)),[L,P]=(0,r.useState)(t.kw),R=2===t.behavior,I=R?C(A):null,z=R&&""!==A&&null==I;(0,r.useEffect)(()=>{R&&!h&&(F(E(t.kw)),P(t.kw))},[h,t.kw,t.id,R]);let W=(0,r.useCallback)(e=>{if(!R)return;let n=C(e);if(null==n)return void F(E(L));F(E(n)),n!==L&&(P(n),c(t.id,{kw:n}))},[R,L,c,t.id]),H=(0,r.useCallback)(()=>{R&&W(A),_(!1)},[W,R,A]),D=e=>{e.preventDefault(),H()};(0,r.useEffect)(()=>{if(!h)return;let e=e=>{let t=u.current;t&&(t.contains(e.target)||H())};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[h,H]),(0,r.useEffect)(()=>{let e=()=>b(!1);return window.addEventListener("mouseup",e),window.addEventListener("touchend",e),()=>{window.removeEventListener("mouseup",e),window.removeEventListener("touchend",e)}},[]);let G=e=>{var t;return!!(null==e||null==(t=e.closest)?void 0:t.call(e,'[data-nodrag="true"]'))},K=(e,n)=>{var a,r;if(h)return;let l=null!=(r=null==(a=u.current)?void 0:a.getBoundingClientRect().left)?r:n.getBoundingClientRect().left;i(t.id,e,l),b(!0)},X=!h,O=(0,r.useMemo)(()=>{var e;return null!=(e=null==j?void 0:j.modes)?e:[]},[j]),U="oven"===t.type||"spove"===t.type;return(0,a.jsxs)("div",{ref:u,className:"".concat(w().box," ").concat(h?w().boxActive:""),style:{left:p,width:f,top:4,background:t.color},title:t.name,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),onMouseDown:()=>b(!0),onTouchStart:()=>b(!0),children:[!h&&!y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:w().resizeEdge,style:{left:0,cursor:"ew-resize"},onMouseDown:e=>{e.stopPropagation(),b(!0),o(t.id,"left",e.clientX)},onTouchStart:e=>{e.stopPropagation(),b(!0),o(t.id,"left",e.touches[0].clientX)}}),(0,a.jsx)("div",{className:w().resizeEdge,style:{right:0,cursor:"ew-resize"},onMouseDown:e=>{e.stopPropagation(),b(!0),o(t.id,"right",e.clientX)},onTouchStart:e=>{e.stopPropagation(),b(!0),o(t.id,"right",e.touches[0].clientX)}})]}),(0,a.jsxs)("div",{ref:d,className:w().header,onMouseDown:e=>{G(e.target)||(S.current={x:e.clientX,y:e.clientY,t:performance.now()},b(!0),K(e.clientX,e.currentTarget))},onMouseUp:e=>{if(G(e.target)){S.current=null;return}let t=S.current;if(!t)return;let n=Math.hypot(e.clientX-t.x,e.clientY-t.y)>3,a=performance.now()-t.t>280;n||a||_(e=>!e),S.current=null},onTouchStart:e=>{if(G(e.target))return;let t=e.touches[0];S.current={x:t.clientX,y:t.clientY,t:performance.now()},b(!0),K(t.clientX,e.currentTarget)},onTouchEnd:e=>{if(G(e.target)){S.current=null;return}let t=S.current;t&&(performance.now()-t.t>300||_(e=>!e),S.current=null)},title:t.name,children:[!N&&(0,a.jsx)("span",{ref:m,className:w().title,"aria-label":t.name,title:t.name,children:t.name}),(0,a.jsx)("span",{className:w().kwWrap,"data-nodrag":"true",children:(0,a.jsx)("span",{className:w().kwValue,"aria-label":"Effekt","data-nodrag":"true",children:t.kw.toFixed(1)})})]}),(g||x)&&X&&(0,a.jsxs)("div",{className:w().dragAssist,"data-nodrag":"true",onMouseDown:e=>{e.stopPropagation();let n=u.current;if(!n)return;let a=n.getBoundingClientRect().left;i(t.id,e.clientX,a),b(!0)},onClick:e=>{e.stopPropagation(),_(!0)},children:[t.name," ",t.kw.toFixed(1)," kW"]}),h&&(0,a.jsxs)(a.Fragment,{children:[k&&(0,a.jsx)("form",{className:w().editPanel,noValidate:!0,onMouseDown:e=>e.stopPropagation(),onSubmit:D,children:(0,a.jsxs)("div",{className:w().fields,children:[(0,a.jsxs)("div",{className:w().field,children:[U?"Anv\xe4ndning":"L\xe4gen",(0,a.jsx)("div",{className:w().swatches,children:O.filter(e=>"eko"===e.key||"normal"===e.key||"intensiv"===e.key).map(e=>(0,a.jsx)(B,{active:t.mode===e.key,onClick:()=>(e=>{if(!(null==j?void 0:j.modes))return;let n=j.modes.find(t=>t.key===e);if(!n)return;let a={mode:n.key,kw:n.kw};y&&(a.duration=n.slots),c(t.id,a)})(e.key),children:e.label},e.key))})]}),(0,a.jsxs)("div",{className:w().metaRow,children:[(0,a.jsx)("span",{className:w().metaText,children:M}),(0,a.jsxs)("div",{className:w().editActions,children:[(0,a.jsx)(T,{type:"button",size:"menu",variant:"menu",onClick:H,children:"St\xe4ng"}),(0,a.jsx)(T,{type:"button",size:"menu",variant:"danger",onClick:()=>s(t.id),children:"Ta bort"})]})]})]})}),!k&&(0,a.jsx)("form",{className:w().editPanel,noValidate:!0,onMouseDown:e=>e.stopPropagation(),onSubmit:D,children:(0,a.jsxs)("div",{className:w().fields,children:[R&&(0,a.jsxs)("label",{className:w().field,children:["Effekt (kW)",(0,a.jsx)("input",{className:w().input,type:"text",inputMode:"decimal","aria-invalid":z,value:A,onChange:e=>F(function(e){var t,n;let a=e.replace(",",".").replace(/[^0-9.]/g,"");if(""===a)return"";let r=a.includes("."),l=a.split("."),i=null!=(t=l[0])?t:"",o=null!=(n=l[1])?n:"",s=""===i?"0":i,c=s;r&&(c="".concat(s,".").concat(o.slice(0,1)));let u=Number(c.endsWith(".")?c.slice(0,-1):c);return Number.isFinite(u)&&u>50?String(50):c}(e.target.value)),onBlur:e=>W(e.currentTarget.value)}),z&&(0,a.jsx)("span",{className:w().err,children:"Ange 0-50 kW med en decimal"})]}),(0,a.jsxs)("div",{className:w().metaRow,children:[(0,a.jsx)("span",{className:w().metaText,children:M}),(0,a.jsxs)("div",{className:w().editActions,children:[(0,a.jsx)(T,{type:"button",size:"menu",variant:"menu",onClick:H,children:"St\xe4ng"}),(0,a.jsx)(T,{type:"button",size:"menu",variant:"danger",onClick:()=>s(t.id),children:"Ta bort"})]})]})]})})]})]})}function L(e){let{instances:t,baseloads:n,catalog:l,setInstances:i}=e,o=(0,r.useRef)(null),[s,c]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=()=>{var e;return c((null==(e=o.current)?void 0:e.clientWidth)||0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let u=Math.max(1,s/288),d=(0,r.useMemo)(()=>t.reduce((e,t)=>Math.max(e,t.lane),0)+1||1,[t]),m=(0,r.useRef)(null),p=(e,n,a)=>{var r;let l=t.find(t=>t.id===e);l&&(m.current={kind:"drag",id:e,offsetSlots:(n-a)/u,laneLock:null!=(r=l.lane)?r:0},document.body.style.userSelect="none")},f=(e,n)=>{let a=t.find(t=>t.id===e);a&&3!==a.behavior&&(m.current={kind:"resize",id:e,edge:n,energyFactor:1===a.behavior?a.kw*a.duration:void 0,startOrig:a.start,durationOrig:a.duration},document.body.style.userSelect="none")},h=(0,r.useCallback)(e=>{if(!m.current||!o.current)return;let{kind:n,id:a,edge:r,offsetSlots:l,laneLock:s,energyFactor:c}=m.current;if(!a)return;let d=(e-o.current.getBoundingClientRect().left)/u;if("drag"===n){if(!t.find(e=>e.id===a))return;let e=b(Math.round(d-(l||0)));i(t=>{let n=[...t.map(t=>t.id===a?{...t,start:e}:t)].sort((e,t)=>e.start-t.start||e.duration-t.duration),r=[];for(let e of n)if(e.id===a&&null!=s)r.push({...e,lane:s});else{let t=0;for(;r.some(n=>n.lane===t&&e.start<n.start+n.duration&&n.start<e.start+e.duration);)t++;r.push({...e,lane:t})}return r});return}if("resize"===n){let e=t.find(e=>e.id===a);if(!e||3===e.behavior)return;if("right"===r){let t=Math.max(1,b(Math.max(e.start+1,Math.round(d)))-e.start),n={duration:t};if(1===e.behavior&&null!=c){let e=Math.round(c/t*10)/10;n={...n,kw:e}}i(e=>e.map(e=>e.id===a?{...e,...n}:e))}else{let t=b(Math.min(e.start+e.duration-1,Math.round(d))),n=Math.max(1,e.start+e.duration-t),r={start:t,duration:n};if(1===e.behavior&&null!=c){let e=Math.round(c/n*10)/10;r={...r,kw:e}}i(e=>e.map(e=>e.id===a?{...e,...r}:e))}}},[t,u,i]);(0,r.useEffect)(()=>{let e=e=>{var t,n,a;let r=null!=(a=null==(n=e.touches)||null==(t=n[0])?void 0:t.clientX)?a:e.clientX;null!=r&&h(r)},t=()=>{m.current=null,document.body.style.userSelect=""};return window.addEventListener("mousemove",e),window.addEventListener("touchmove",e,{passive:!1}),window.addEventListener("mouseup",t),window.addEventListener("touchend",t),window.addEventListener("pointerup",t),window.addEventListener("pointercancel",t),window.addEventListener("mouseleave",t),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("touchmove",e),window.removeEventListener("mouseup",t),window.removeEventListener("touchend",t),window.removeEventListener("pointerup",t),window.removeEventListener("pointercancel",t),window.removeEventListener("mouseleave",t)}},[h]);let _=24+56*d,g=_+(n.length>0?12+40*n.length:0);return(0,a.jsxs)("div",{className:x().wrap,children:[(0,a.jsx)("div",{className:x().axis,children:(0,a.jsx)("div",{className:x().axisInner,children:Array.from({length:25}).map((e,t)=>(0,a.jsx)("div",{className:x().tick,style:{left:"".concat(t/24*100,"%")},children:(0,a.jsxs)("span",{children:[String(t).padStart(2,"0"),":00"]})},t))})}),(0,a.jsx)("div",{className:x().grid,children:(0,a.jsxs)("div",{className:x().gridInner,ref:o,style:{height:g},children:[(0,a.jsx)("div",{className:x().highBand,style:{left:"".concat(7/24*100,"%"),width:"".concat(14/24*100,"%"),height:g},"aria-hidden":!0}),Array.from({length:d}).map((e,t)=>(0,a.jsx)("div",{className:x().lane,style:{top:24+56*t}},t)),t.map(e=>(0,a.jsx)("div",{className:x().boxRow,style:{top:24+56*e.lane-4},children:(0,a.jsx)(F,{inst:e,pxPerSlot:u,catalog:l,onDragStart:p,onResizeStart:f,onRemove:e=>i(t=>t.filter(t=>t.id!==e)),onUpdate:(e,t)=>i(n=>n.map(n=>n.id===e?{...n,...t}:n))})},e.id)),n.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:x().baseloadSeparator,style:{top:_},children:(0,a.jsx)("span",{className:x().separatorLabel,children:"Baslast"})}),n.map((e,t)=>{let n=(24*e.kw).toFixed(0);return(0,a.jsx)("div",{className:x().baseloadRow,style:{top:_+12+40*t,height:40},children:(0,a.jsx)("div",{className:x().baseloadBar,style:{background:e.color},title:"\xc4ndra inst\xe4llningar i 'L\xe4gg till apparat'-menyn",children:(0,a.jsxs)("span",{className:x().baseloadText,children:[e.name," • Dygnsgenomsnitt"," ",e.kw.toFixed(2)," ","kW • Dygnsenergi"," ",n," ","kWh"]})})},e.id)})]})]})})]})}var P=n(9992),R=n.n(P);function I(e){if(""===e)return"";let t=Number(e.replace(",","."));return Number.isFinite(t)||(t=0),(Math.round(10*(t=Math.min(50,Math.max(0,t))))/10).toFixed(1)}function z(e){let{catalog:t,onPick:n,onCreateCustom:l,onRequestClose:i}=e,o=(0,r.useRef)(null),[s,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[h,_]=(0,r.useState)(""),[g,v]=(0,r.useState)(""),x=(0,r.useMemo)(()=>{if(""===m)return!1;let e=Number(m.replace(",","."));return Number.isFinite(e)&&e>=0&&e<=50},[m]),b=(0,r.useMemo)(()=>{let e=60*(""===h?0:Number(h))+(""===g?0:Number(g));return e>=5&&e<=1440},[h,g]),k=(0,r.useMemo)(()=>u.trim().length>0&&u.trim().length<=20,[u])&&x&&b,w=()=>{c(!1),d(""),p(""),_(""),v("")};return(0,a.jsxs)("div",{ref:o,className:R().palette,role:"menu",children:[t.map(e=>(0,a.jsx)("button",{className:R().item,onClick:()=>{n(e),i()},children:(0,a.jsxs)("div",{className:R().meta,children:[(0,a.jsx)("div",{className:R().name,children:e.name}),(0,a.jsxs)("div",{className:R().sub,children:[e.kw.toFixed(1)," kW",3!==e.behavior&&(0,a.jsxs)(a.Fragment,{children:[" ・ ",(e.defaultSlots/12|0)==0?"".concat(Math.round(e.defaultSlots/12*60)," min"):(()=>{let t=e.defaultSlots/12,n=Math.floor(t),a=Math.round((t-n)*60);return 0===n?"".concat(a," min"):0===a?"".concat(n," h"):"".concat(n," h ").concat(a," min")})()]})]})]})},e.type)),t.length>0&&(0,a.jsx)("div",{className:R().sep}),s?(0,a.jsxs)("form",{className:R().customForm,noValidate:!0,onSubmit:e=>{var t,n;let a;if(e.preventDefault(),!k)return;let r=(t=h,n=g,(a=5*Math.round((a=Math.max(5,Math.min(1440,60*(""===t?0:Number(t))+(""===n?0:Number(n)))))/5))/5),o=Number(I(m));l({name:u.trim(),kw:o,color:f(),durationSlots:r}),w(),i()},children:[(0,a.jsx)("div",{className:R().row,children:(0,a.jsxs)("label",{className:R().label,children:["Namn",(0,a.jsx)("input",{className:R().input,value:u,maxLength:20,onChange:e=>d(e.target.value)})]})}),(0,a.jsxs)("div",{className:R().row,children:[(0,a.jsxs)("label",{className:R().label,children:["Effekt (kW)",(0,a.jsx)("input",{className:R().input,type:"text",inputMode:"decimal","aria-invalid":""!==m&&!x,value:m,onChange:e=>p(function(e){var t;let n=e.replace(",",".").replace(/[^0-9.]/g,"");if(""===n)return"";let a=n.split("."),r=a[0]||"0",l=null!=(t=a[1])?t:"",i=Number(n=""===l?r:"".concat(r,".").concat(l.slice(0,1)));if(Number.isFinite(i)){if(i<0)return"0";if(i>50)return"50"}return n}(e.target.value)),onBlur:e=>p(I(e.target.value)),placeholder:"0.0–50.0"}),""!==m&&!x&&(0,a.jsx)("span",{style:{color:"var(--red-500)",fontSize:12},children:"Ange 0–50 med h\xf6gst en decimal"})]}),(0,a.jsxs)("div",{className:R().label,style:{display:"grid",gap:6},children:["L\xe4ngd",(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[(0,a.jsx)("input",{className:R().input,type:"number",inputMode:"numeric",min:0,max:24,placeholder:"h",value:h,onChange:e=>_(e.target.value.replace(/[^0-9]/g,""))}),(0,a.jsx)("input",{className:R().input,type:"number",inputMode:"numeric",min:0,max:59,placeholder:"min",value:g,onChange:e=>v(e.target.value.replace(/[^0-9]/g,""))})]}),!b&&(""!==h||""!==g)&&(0,a.jsx)("span",{style:{color:"var(--red-500)",fontSize:12},children:"Minst 5 min, h\xf6gst 24 h (avrundas till 5-minutersintervall)"})]})]}),(0,a.jsxs)("div",{className:R().actions,children:[(0,a.jsx)(T,{type:"button",size:"menu",variant:"menu",onClick:w,children:"Avbryt"}),(0,a.jsx)(T,{type:"submit",size:"menu",variant:"menu",disabled:!k,children:"Skapa"})]})]}):(0,a.jsxs)("button",{className:R().item,onClick:()=>c(!0),children:[(0,a.jsx)("span",{className:R().plus,children:"＋"}),(0,a.jsx)("div",{className:R().name,children:"Skapa egen..."})]})]})}let W={ref:3.3,T_ref:7,a:.04,min:1.8,max:4.5,T_biv:-7},H={ref:3.8,T_ref:0,a:.015,min:3,max:5,T_biv:-15};function D(e,t,n){return Math.max(t,Math.min(n,e))}function G(e,t){return Math.max(0,.0016*t*(20-e))}function K(e,t,n){if("fjarrvarme"===t)return .12;let a=G(e,n);if("direktel"===t)return a;let r="luft"===t?D(W.ref+W.a*(e-W.T_ref),W.min,W.max):D(H.ref+H.a*(e-H.T_ref),H.min,H.max),l=Math.min(a,G("luft"===t?W.T_biv:H.T_biv,n)),i=Math.max(0,a-l);return(l>0?l/r:0)+i}let X={direktel:"Direktverkande el",luft:"Luftv\xe4rmepump",berg:"Berg/jordv\xe4rmepump",fjarrvarme:"Fj\xe4rrv\xe4rme"},O=new Set([1,2,3,4,5]),U=new Set(["normal","eko","intensiv","ingen","smart"]);function V(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function q(e){if("string"!=typeof e)return null;let t=e.trim();return t.length>0?t:null}function Q(e){if("number"==typeof e)return Number.isFinite(e)?e:null;if("string"==typeof e){let t=e.trim().replace(",",".");if(!t)return null;let n=Number(t);return Number.isFinite(n)?n:null}return null}function Z(e){let t=Q(e);return null!=t&&Number.isInteger(t)?t:null}function J(e){if(!V(e))return null;let t=function(e){if("string"!=typeof e)return null;let t=e.trim();return U.has(t)?t:null}(e.key),n=q(e.label),a=Q(e.kw),r=Z(e.slots);return!t||!n||null==a||null==r||r<=0||r>288||a<0?null:{key:t,label:n,kw:a,slots:r}}var Y=n(5649),$=n.n(Y);function ee(e){let{label:t,checked:n,onChange:r}=e;return(0,a.jsxs)("button",{type:"button",role:"checkbox","aria-checked":n,className:$().wrap,onClick:()=>r(!n),children:[(0,a.jsx)("span",{className:"".concat($().box," ").concat(n?$().boxChecked:""),children:(0,a.jsx)("span",{className:$().dot})}),(0,a.jsx)("span",{className:$().label,children:t})]})}function et(e){let{baseloadEnabled:t,fridgeEnabled:n,fridgeKw:r,baseloadConfig:l,onToggleBaseload:i,onToggleFridge:o,onUpdateBaseloadConfig:s}=e,c=K(l.outdoorTemp,l.heatingSystem,l.areaM2);return(0,a.jsxs)("div",{className:R().palette,role:"dialog","aria-label":"Baslast uppv\xe4rmning",children:[(0,a.jsxs)("div",{className:R().baseloadSection,children:[(0,a.jsxs)("div",{className:R().baseloadHeader,children:[(0,a.jsx)(ee,{label:"Uppv\xe4rmning",checked:t,onChange:i}),(0,a.jsxs)("span",{className:R().baseloadKw,children:[c.toFixed(2)," kW"]})]}),t&&(0,a.jsxs)("div",{className:R().baseloadConfig,children:[(0,a.jsxs)("div",{className:R().configRow,children:[(0,a.jsx)("label",{className:R().configLabel,children:"V\xe4rmesystem"}),(0,a.jsx)("div",{className:R().configBtnGroup,children:["direktel","luft","berg","fjarrvarme"].map(e=>(0,a.jsx)(B,{active:l.heatingSystem===e,onClick:()=>s({heatingSystem:e}),children:X[e]},e))})]}),(0,a.jsxs)("div",{className:R().configRow,children:[(0,a.jsxs)("label",{className:R().configLabel,children:["Uppv\xe4rmningsyta: ",l.areaM2," m\xb2"]}),(0,a.jsx)("input",{type:"range",min:"50",max:"250",step:"5",value:l.areaM2,onChange:e=>s({areaM2:Number(e.target.value)}),className:"".concat(R().tempSlider," ").concat(R().areaSlider)}),(0,a.jsxs)("div",{className:R().sliderLabels,children:[(0,a.jsx)("span",{children:"50 m\xb2"}),(0,a.jsx)("span",{children:"250 m\xb2"})]})]}),(0,a.jsxs)("div",{className:R().configRow,children:[(0,a.jsxs)("label",{className:R().configLabel,children:["Utomhustemperatur: ",l.outdoorTemp,"\xb0C"]}),(0,a.jsx)("input",{type:"range",min:"-10",max:"15",step:"1",value:l.outdoorTemp,onChange:e=>s({outdoorTemp:Number(e.target.value)}),className:R().tempSlider}),(0,a.jsxs)("div",{className:R().sliderLabels,children:[(0,a.jsx)("span",{children:"-10\xb0C"}),(0,a.jsx)("span",{children:"15\xb0C"})]})]})]})]}),(0,a.jsx)("div",{className:R().baseloadSection,children:(0,a.jsxs)("div",{className:R().baseloadHeader,children:[(0,a.jsx)(ee,{label:"Kyl och frys",checked:n,onChange:o}),(0,a.jsxs)("span",{className:R().baseloadKw,children:[r.toFixed(2)," kW"]})]})})]})}var en=n(5862),ea=n.n(en);function er(e){let{title:t,value:n,icon:r,className:l,style:i}=e,o=u.white,s=c.blue,d=c.yellow;return(0,a.jsxs)("div",{className:l?"".concat(ea().card," ").concat(l):ea().card,style:{backgroundColor:o,color:s,borderColor:d,borderWidth:3,boxShadow:"none",...i},children:[r&&(0,a.jsx)("div",{className:ea().icon,children:r}),(0,a.jsx)("div",{className:ea().title,children:t}),(0,a.jsx)("div",{className:ea().value,children:n})]})}var el=n(9614),ei=n.n(el);function eo(e){let{label:t,value:n,options:r,onChange:l}=e;return(0,a.jsxs)("label",{className:ei().wrap,children:[t&&(0,a.jsx)("span",{className:ei().label,children:t}),(0,a.jsx)("select",{className:ei().select,value:String(n),onChange:e=>{let t=e.target.value,n=r.find(e=>String(e.value)===t);n&&l(n.value)},children:r.map(e=>(0,a.jsx)("option",{value:String(e.value),children:e.label},String(e.value)))})]})}function es(e){let t=[...e].sort((e,t)=>e.start-t.start||e.duration-t.duration),n=[];for(let e of t)n.push({...e,lane:function(e,t){let n=new Map;for(let a of e.filter(e=>e.id!==t.id)){let e=n.get(a.lane)||[];e.push(a),n.set(a.lane,e)}let a=0;for(;;){if(!(n.get(a)||[]).some(e=>{var n,a,r;return n=e.start,a=e.start+e.duration,r=t.start,n<t.start+t.duration&&r<a}))return a;a++}}(n,e)});return n}let ec=400*Math.sqrt(3)/1e3,eu=["none",16,20,25,35,50,63],ed={intro:["L\xe4gg till baslaster f\xf6r att simulera uppv\xe4rmning och kyl/frys.","L\xe4gg till apparater och flytta dem \xf6ver dygnet f\xf6r att se hur effekttoppar och energianv\xe4ndning f\xf6r\xe4ndras.","V\xe4lj s\xe4kring f\xf6r att se s\xe4kringslinjen i diagrammet och j\xe4mf\xf6ra mot effekttoppar."],disclaimer:{title:"Effektv\xe4rdena \xe4r typiska riktv\xe4rden som anger ungef\xe4rliga niv\xe5er.",items:["Uppv\xe4rmningseffekten \xe4r en f\xf6renklad uppskattning f\xf6r att visa en rimlig niv\xe5. I verkligheten p\xe5verkas v\xe4rmebehovet mycket av tex isolering, luftl\xe4ckage, bygg\xe5r och f\xf6nsterandel.","F\xf6r alla elektriska apparater varierar den faktiska effekten beroende p\xe5 tillverkare, modell och prisklass.","F\xf6r elbastu och elbilsladdare p\xe5verkas timmedeleffekten dessutom i h\xf6g grad av eventuell smart styrning samt av hur utrustningen anv\xe4nds."]}},em={show:!1,infoText:"Justerad timmedeleffekt (h\xf6glast)",factor:1,unit:"kW",helpEnabled:!1,helpText:""};function ep(){let[e,t]=(0,r.useState)([]),[n,l]=(0,r.useState)([]),[o,s]=(0,r.useState)(ed),[c,d]=(0,r.useState)(em),[m,p]=(0,r.useState)(!1),[_,g]=(0,r.useState)(!1),v=(0,r.useRef)(null),x=(0,r.useRef)(null),b=(0,r.useRef)(null),[k,w]=(0,r.useState)(!1),[y,j]=(0,r.useState)(null),N=(0,r.useRef)(null),S=(0,r.useRef)(null),[M,A]=(0,r.useState)(!1),[B,C]=(0,r.useState)(16),E=c.helpEnabled&&c.helpText.trim().length>0,[F,P]=(0,r.useState)(null),[R,I]=(0,r.useState)(!1),[W,H]=(0,r.useState)(!1),[D,G]=(0,r.useState)({heatingSystem:"luft",areaM2:140,outdoorTemp:5,mode:"ingen"});(0,r.useEffect)(()=>{if(!m&&!_)return;let e=e=>{let t=v.current;t&&!t.contains(e.target)&&(p(!1),g(!1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[m,_]),(0,r.useEffect)(()=>{if(!k)return;let e=e=>{let t=x.current;t&&!t.contains(e.target)&&w(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[k]),(0,r.useEffect)(()=>{if(!M)return;let e=e=>{let t=N.current;t&&!t.contains(e.target)&&A(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[M]),(0,r.useEffect)(()=>{if(!M)return void P(null);let e=()=>{let e=S.current;if(!e)return;let t=e.getBoundingClientRect(),n=t.left+t.width/2;P({caretLeft:n,caretTop:t.bottom+1,popoverLeft:n,popoverTop:t.bottom+8})};return e(),window.addEventListener("resize",e),window.addEventListener("scroll",e,!0),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e,!0)}},[M]),(0,r.useEffect)(()=>{!E&&M&&A(!1)},[E,M]),(0,r.useEffect)(()=>{let e=()=>{let e=x.current,t=b.current;if(!e||!t)return;let n=e.getBoundingClientRect(),a=t.getBoundingClientRect();j(a.left-n.left+a.width/2)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await fetch("/catalog.json",{cache:"no-store"});if(!t.ok)throw Error("HTTP ".concat(t.status));let n=await t.json(),a=function(e){if(!Array.isArray(e))return[];let t=[],n=new Set;for(let a of e){let e=function(e){if(!V(e))return null;let t=q(e.type),n=q(e.name),a=Q(e.kw),r=Z(e.defaultSlots),l=function(e){let t=Z(e);return null==t?null:O.has(t)?t:null}(e.behavior);if(!t||!n||null==a||null==r||null==l||r<=0||r>288||a<0)return null;let i="string"==typeof e.color?e.color.trim():"",o=Array.isArray(e.modes)?e.modes:null,s=o?function(e){let t=new Set;return e.filter(e=>!t.has(e.key)&&(t.add(e.key),!0))}(o.map(J).filter(e=>!!e)):void 0;return 3!==l&&5!==l||s&&0!==s.length?{type:t,name:n,kw:a,defaultSlots:r,color:i,behavior:l,...s?{modes:s}:{}}:null}(a);e&&(n.has(e.type)||(n.add(e.type),t.push(e)))}return t}(n);if(!e)return;if(l(a),Array.isArray(n)){let e=n.length-a.length;e>0&&console.warn("[catalog] Ignored ".concat(e," items from catalog.json due to invalid data."))}else console.warn("[catalog] catalog.json is not an array.")}catch(t){if(!e)return;l([]),console.warn("[catalog] Failed to load catalog.json.",t)}})(),()=>{e=!1}},[]),(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await fetch("/kpi.json",{cache:"no-store"});if(!t.ok)throw Error("HTTP ".concat(t.status));let n=await t.json(),a=function(e){if(!e||"object"!=typeof e||Array.isArray(e))return em;let t="boolean"==typeof e.show?e.show:em.show,n="string"==typeof e.infoText&&e.infoText.trim().length>0?e.infoText.trim():em.infoText,a="number"==typeof e.factor&&Number.isFinite(e.factor)?e.factor:em.factor,r="string"==typeof e.unit&&e.unit.trim().length>0?e.unit.trim():em.unit,l="boolean"==typeof e.helpEnabled?e.helpEnabled:em.helpEnabled;return{show:t,infoText:n,factor:a,unit:r,helpEnabled:l,helpText:"string"==typeof e.helpText&&e.helpText.trim().length>0?e.helpText.trim():em.helpText}}(n);if(!e)return;d(a),(!n||"object"!=typeof n||Array.isArray(n))&&console.warn("[kpi] kpi.json is not an object.")}catch(t){if(!e)return;d(em),console.warn("[kpi] Failed to load kpi.json.",t)}})(),()=>{e=!1}},[]),(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await fetch("/description.json",{cache:"no-store"});if(!t.ok)throw Error("HTTP ".concat(t.status));let n=await t.json(),a=function(e){if(!e||"object"!=typeof e||Array.isArray(e))return ed;let t=Array.isArray(e.intro)?e.intro.filter(e=>"string"==typeof e&&e.trim().length>0):ed.intro,n=e.disclaimer,a=n&&"object"==typeof n&&!Array.isArray(n)?n:null,r=a&&"string"==typeof a.title&&a.title.trim().length>0?a.title:ed.disclaimer.title,l=a&&Array.isArray(a.items)?a.items.filter(e=>"string"==typeof e&&e.trim().length>0):ed.disclaimer.items;return{intro:t.length?t:ed.intro,disclaimer:{title:r,items:l.length?l:ed.disclaimer.items}}}(n);if(!e)return;s(a),(!n||"object"!=typeof n||Array.isArray(n))&&console.warn("[description] description.json is not an object.")}catch(t){if(!e)return;s(ed),console.warn("[description] Failed to load description.json.",t)}})(),()=>{e=!1}},[]);let X=(0,r.useMemo)(()=>{let t=[...e];if(W){let e={id:"baseload-fridge-freezer",type:"fridge_freezer",name:"Kyl och frys",kw:.3,color:u.blue_dark,start:0,duration:288,lane:0,behavior:4,mode:"ingen"};t.push(e)}if(R){let e={id:"baseload",type:"baseload",name:"Uppv\xe4rmning",kw:K(D.outdoorTemp,D.heatingSystem,D.areaM2),color:u.blue_dark,start:0,duration:288,lane:0,behavior:4,mode:D.mode,heatingSystem:D.heatingSystem,areaM2:D.areaM2,outdoorTemp:D.outdoorTemp};t.push(e)}return t},[e,R,D,W]),U=(0,r.useMemo)(()=>(function(e,t){let n=Array(288).fill(0),a=[],r=Array(288);for(let e=0;e<t;e++){let t=Math.floor(5*e/60);r[e]=+(t>=7&&t<21)}for(let r of e)if(4===r.behavior&&"smart"===r.mode)a.push(r);else{let e=Math.max(0,r.start),a=Math.min(t,r.start+r.duration);for(let t=e;t<a;t++)n[t]+=r.kw}let l=n;for(let e of a){let n=function(e,t,n){let a=t.length;if(0===a||e<=0)return Array(a).fill(e);let r=.1*e,l=1.5*e,i=e*a,o=Array(a),s=0;for(let r=0;r<a;r++)o[r]=t[r]+(n[r]?.5*e:0),o[r]>s&&(s=o[r]);if(s<1e-6)return Array(a).fill(e);let c=Array(a);for(let e=0;e<a;e++){let t=o[e]/s;c[e]=l-t*(l-r),c[e]=Math.max(r,Math.min(l,c[e]))}let u=[];for(let t=0;t<a;t++)c[t]<e&&u.push({index:t,pressure:o[t]});if(u.length>24){u.sort((e,t)=>t.pressure-e.pressure);for(let t=24;t<u.length;t++)c[u[t].index]=e}let d=c.reduce((e,t)=>e+t,0),m=i-d,p=0;for(;Math.abs(m)>.1&&p<5;){let e=m/a;for(let t=0;t<a;t++)c[t]=Math.max(r,Math.min(l,c[t]+e));m=i-(d=c.reduce((e,t)=>e+t,0)),p++}for(let e=0;e<a;e++)c[e]=Math.round(10*c[e])/10;return c}(e.kw,l,r),a=l.slice();for(let e=0;e<t;e++)a[e]+=n[e];l=a}for(let e=0;e<l.length;e++)l[e]=+l[e].toFixed(1);return l})(X,288),[X]),Y=(0,r.useMemo)(()=>+U.reduce((e,t)=>e+5/60*t,0).toFixed(0),[U]),$=(0,r.useMemo)(()=>"none"===B?null:+(B*ec).toFixed(1),[B]),ee=(0,r.useMemo)(()=>{let e=null,t=-1/0;for(let a=0;a<24;a++){if(!(a>=7&&a<21))continue;let r=0;for(let e=0;e<12;e++){var n;r+=null!=(n=U[12*a+e])?n:0}let l=r/12;l>t&&(t=l,e=a)}return e},[U,12]),en=(0,r.useMemo)(()=>{if(null==ee)return 0;let e=0;for(let n=0;n<12;n++){var t;e+=null!=(t=U[12*ee+n])?t:0}return+(e/12).toFixed(1)},[U,12,ee]),ea=(0,r.useMemo)(()=>en*c.factor,[en,c.factor]),el=E?(0,a.jsxs)("span",{className:i().kpiTitleRow,children:[(0,a.jsx)("span",{className:i().kpiTitleText,children:c.infoText}),(0,a.jsxs)("span",{className:i().kpiHelpAnchor,ref:N,children:[(0,a.jsx)("button",{type:"button",className:i().kpiHelpButton,"aria-label":"Mer info om KPI","aria-expanded":M,"aria-haspopup":"dialog",onClick:()=>A(e=>!e),ref:S,children:"?"}),M&&F&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:i().kpiHelpCaret,"aria-hidden":!0,style:{top:F.caretTop,left:F.caretLeft}}),(0,a.jsx)("div",{role:"dialog","aria-label":"Beskrivning av KPI",className:i().kpiHelpPopover,style:{top:F.popoverTop,left:F.popoverLeft},children:c.helpText})]})]})]}):c.infoText,ei=(0,r.useMemo)(()=>{let e=-1/0;for(let n=0;n<24;n++){let a=0;for(let e=0;e<12;e++){var t;a+=null!=(t=U[12*n+e])?t:0}let r=a/12;r>e&&(e=r)}return+(e===-1/0?0:e).toFixed(1)},[U,12]),ep=(0,r.useMemo)(()=>X.filter(e=>4===e.behavior),[X]),ef=(0,r.useMemo)(()=>X.filter(e=>4!==e.behavior),[X]);return(0,a.jsxs)("div",{className:i().card,children:[(0,a.jsxs)("div",{className:i().kpis,children:[(0,a.jsx)("div",{className:i().toggle,children:(0,a.jsxs)("div",{className:i().fuseRow,children:[(0,a.jsxs)("div",{className:i().infoAnchor,ref:x,style:null!=y?{"--info-caret-x":"".concat(y,"px")}:void 0,children:[(0,a.jsx)("button",{type:"button","aria-label":"Om appen","aria-expanded":k,"aria-haspopup":"dialog",onClick:()=>w(e=>!e),ref:b,className:"infoButton",children:"?"}),k&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:i().infoCaret,"aria-hidden":!0}),(0,a.jsx)("div",{role:"dialog","aria-label":"Beskrivning av appen",className:i().infoPopover,children:(0,a.jsxs)("ul",{className:i().infoList,children:[o.intro.map((e,t)=>(0,a.jsx)("li",{children:e},"intro-".concat(t))),(0,a.jsxs)("li",{children:[o.disclaimer.title,(0,a.jsx)("ul",{className:i().infoSublist,children:o.disclaimer.items.map((e,t)=>(0,a.jsx)("li",{children:e},"disclaimer-".concat(t)))})]})]})})]})]}),(0,a.jsx)(eo,{label:"S\xe4kring",value:B,options:eu.map(e=>({value:e,label:"none"===e?"Visa ingen s\xe4kringseffekt":"".concat(e," A (").concat((e*ec).toFixed(1)," kW)")})),onChange:e=>C(e)})]})}),(0,a.jsxs)("div",{className:i().kpiCards,children:[c.show&&(0,a.jsx)(er,{title:el,value:"".concat(ea.toFixed(1)).concat(c.unit?" ".concat(c.unit):""),style:{paddingLeft:10,paddingRight:20}}),(0,a.jsx)(er,{title:"H\xf6gsta timmedeleffekt under h\xf6glast",value:"".concat(en.toFixed(1)," kW")}),(0,a.jsx)(er,{title:"H\xf6gsta timmedeleffekt totalt",value:"".concat(ei.toFixed(1)," kW")}),(0,a.jsx)(er,{title:"Energianv\xe4ndning",value:"≈ ".concat(Y.toFixed(0)," kWh")})]})]}),(0,a.jsx)(h,{series:U,yFuseKw:$,fuseA:B}),(0,a.jsxs)("div",{className:i().toolbar,ref:v,children:[(0,a.jsxs)("div",{className:i().toolbarItem,children:[(0,a.jsx)(T,{onClick:()=>g(e=>{let t=!e;return t&&p(!1),t}),"aria-expanded":_,children:"Baslaster"}),_&&(0,a.jsx)("div",{className:i().popover,children:(0,a.jsx)(et,{baseloadEnabled:R,fridgeEnabled:W,fridgeKw:.3,baseloadConfig:D,onToggleBaseload:I,onToggleFridge:H,onUpdateBaseloadConfig:e=>G(t=>({...t,...e,mode:"ingen"}))})})]}),(0,a.jsxs)("div",{className:i().toolbarItem,children:[(0,a.jsx)(T,{onClick:()=>p(e=>{let t=!e;return t&&g(!1),t}),"aria-expanded":m,children:"Apparater"}),(0,a.jsx)(T,{type:"button",variant:"danger",onClick:()=>{t([]),I(!1),H(!1),p(!1),g(!1)},style:{marginLeft:6},children:"Rensa"}),m&&(0,a.jsx)("div",{className:i().popover,children:(0,a.jsx)(z,{catalog:n,onPick:e=>{var n;let a={id:"".concat(e.type,"-").concat(Math.random().toString(36).slice(2,8)),type:e.type,name:e.name,kw:e.kw,color:e.color||f(),start:84,duration:e.defaultSlots,lane:0,behavior:e.behavior};if((3===e.behavior||5===e.behavior)&&e.modes){let t=null!=(n=e.modes.find(e=>"normal"===e.key))?n:e.modes[0];a.kw=t.kw,a.duration=t.slots,a.mode=t.key}t(e=>es([...e,a]))},onCreateCustom:e=>{(e=>{let{name:n,kw:a,color:r,durationSlots:l}=e,i={id:"custom-".concat(Math.random().toString(36).slice(2,8)),type:"custom",name:n,kw:a,color:r,start:84,duration:l,lane:0,behavior:2};t(e=>es([...e,i]))})(e)},onRequestClose:()=>p(!1)})})]})]}),(0,a.jsx)(L,{instances:ef,baseloads:ep,catalog:n,setInstances:e=>t(t=>es(e(t)))})]})}let ef={title:"Effektkalkylator - eln\xe4t",subtitle:"Utforska hur apparater p\xe5verkar timmedeleffekt och energi under ett effektdygn med h\xf6glast.",infoLine:"F\xf6r b\xe4sta upplevelse, anv\xe4nd g\xe4rna verktyget p\xe5 en datorsk\xe4rm. Verktyget fungerar endast via det interna n\xe4tverket."};function eh(){let[e,t]=(0,r.useState)(ef);return(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{let n=await fetch("/header.json",{cache:"no-store"});if(!n.ok)throw Error("HTTP ".concat(n.status));let a=await n.json();if(!e)return;t(function(e){if(!e||"object"!=typeof e||Array.isArray(e))return ef;let t=(t,n)=>"string"==typeof e[t]?e[t]:n;return{title:t("title",ef.title),subtitle:t("subtitle",ef.subtitle),infoLine:t("infoLine",ef.infoLine)}}(a))}catch(n){if(!e)return;t(ef),console.warn("[header] Failed to load header.json.",n)}})(),()=>{e=!1}},[]),(0,a.jsx)("main",{style:{minHeight:"100vh",background:"#ffffff",padding:"24px",color:"var(--text-strong)"},children:(0,a.jsxs)("div",{style:{maxWidth:"100vw",margin:"0 auto"},children:[(0,a.jsx)("h1",{style:{margin:0,fontSize:28,color:"var(--blue-900)",fontFamily:"var(--font-poppins)"},children:e.title}),(0,a.jsx)("p",{style:{margin:"6px 0 0",fontSize:16,color:"var(--text-muted)",fontFamily:"var(--font-poppins)"},children:e.subtitle}),(0,a.jsx)("p",{style:{margin:"4px 0 0",fontSize:13,color:"var(--text-muted)",fontFamily:"var(--font-poppins)"},children:e.infoLine}),(0,a.jsx)("div",{style:{height:8}}),(0,a.jsx)(ep,{})]})})}},5649:e=>{e.exports={wrap:"CheckboxField_wrap__bXG40",box:"CheckboxField_box__kwl6L",dot:"CheckboxField_dot__z0EE8",boxChecked:"CheckboxField_boxChecked__aM_zA",label:"CheckboxField_label__4Zd3V"}},5749:e=>{e.exports={wrap:"TimelineGrid_wrap__zdkqU",axis:"TimelineGrid_axis__3Kk44",axisInner:"TimelineGrid_axisInner__DQdn0",tick:"TimelineGrid_tick__qvI42",grid:"TimelineGrid_grid__8al10",gridInner:"TimelineGrid_gridInner__m6Y_N",lane:"TimelineGrid_lane__itedI",boxRow:"TimelineGrid_boxRow__D6bjx",highBand:"TimelineGrid_highBand__rVLIW",baseloadSeparator:"TimelineGrid_baseloadSeparator__vXQ__",separatorLabel:"TimelineGrid_separatorLabel__hxGMs",baseloadRow:"TimelineGrid_baseloadRow__7Q1H9",baseloadBar:"TimelineGrid_baseloadBar__uSFJ6",baseloadText:"TimelineGrid_baseloadText__ZnaN6"}},5862:e=>{e.exports={card:"KpiCard_card__tSNwF",icon:"KpiCard_icon__AmtDi",title:"KpiCard_title__db_7q",value:"KpiCard_value__oJymJ"}},6169:e=>{e.exports={wrap:"EffectChart_wrap__Zk4Ga",canvas:"EffectChart_canvas__Q9gT0"}},6583:e=>{e.exports={base:"OptionButton_base__1hc_b",radioOuter:"OptionButton_radioOuter__sSvFs",radioInner:"OptionButton_radioInner__9KXVZ",label:"OptionButton_label__H34W7",active:"OptionButton_active__MQJNK"}},7786:e=>{e.exports={base:"Button_base__uaCv9",large:"Button_large__Pac7_",menuSize:"Button_menuSize__9lqio",default:"Button_default__BIeJB",danger:"Button_danger__90wVA",menu:"Button_menu__Im7aJ"}},9614:e=>{e.exports={wrap:"SelectField_wrap__JOnMY",label:"SelectField_label__jcc_O",select:"SelectField_select__nZeVa"}},9992:e=>{e.exports={palette:"AppliancePalette_palette__DJqSp",baseloadSection:"AppliancePalette_baseloadSection__FdLKo",baseloadHeader:"AppliancePalette_baseloadHeader__AYpoN",baseloadToggle:"AppliancePalette_baseloadToggle__qT8jd",toggleLabel:"AppliancePalette_toggleLabel__8Ly6C",baseloadKw:"AppliancePalette_baseloadKw__zOksn",baseloadConfig:"AppliancePalette_baseloadConfig__8UJjs",configRow:"AppliancePalette_configRow__GbbSO",configLabel:"AppliancePalette_configLabel__Ecq9j",tempSlider:"AppliancePalette_tempSlider__u_5R5",areaSlider:"AppliancePalette_areaSlider__rXx_5",sliderLabels:"AppliancePalette_sliderLabels__0p68n",configBtnGroup:"AppliancePalette_configBtnGroup__k_Ypi",configBtn:"AppliancePalette_configBtn__imPat",configBtnActive:"AppliancePalette_configBtnActive__oQhCo",item:"AppliancePalette_item__359X9",meta:"AppliancePalette_meta__cLGIK",name:"AppliancePalette_name__TMtrq",sub:"AppliancePalette_sub__XQgO6",sep:"AppliancePalette_sep__wNd6W",plus:"AppliancePalette_plus__ZeCEg",customForm:"AppliancePalette_customForm__TaJpx",row:"AppliancePalette_row__s6vKu",label:"AppliancePalette_label__v_TFN",input:"AppliancePalette_input__Lcsec",swatches:"AppliancePalette_swatches__BjTjk",swatchPick:"AppliancePalette_swatchPick___S2Dy",swatchActive:"AppliancePalette_swatchActive__NPxhw",actions:"AppliancePalette_actions__u0hpD",btnPrimary:"AppliancePalette_btnPrimary___IHK5",btnGhost:"AppliancePalette_btnGhost__UzTtV"}}},e=>{e.O(0,[1,441,255,358],()=>e(e.s=985)),_N_E=e.O()}]);